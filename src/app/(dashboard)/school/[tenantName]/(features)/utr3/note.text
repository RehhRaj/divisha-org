page.tsx                        âœ… Entry page
file-process.client.tsx        âœ… Main upload & processing logic
ClientWrapper.tsx              âœ… Possibly layout/client-side config
fileHandlers.ts                âœ… Handles file selection and parsing
extractData.ts                 âœ… Mock or real data extraction
detectHeaderRows.ts            âœ… (Future?) logic to guess header rows
detectFileType.ts              âœ… Detects extension/type from filename
types.ts                       âœ… Shared type definitions (e.g. ParsedFileData)


```
â””â”€â”€ ğŸ“utr3
    â””â”€â”€ ğŸ“components
        â””â”€â”€ ğŸ“utils
            â”œâ”€â”€ detectFileType.ts
            â”œâ”€â”€ detectHeaderRows.ts
            â”œâ”€â”€ extractData.ts
            â”œâ”€â”€ fileHandlers.ts
            â”œâ”€â”€ parseFile.ts
            â”œâ”€â”€ types.ts
        â”œâ”€â”€ export-buttons.tsx
        â”œâ”€â”€ file-export.tsx
        â”œâ”€â”€ file-preview.tsx
        â”œâ”€â”€ file-selector .tsx
        â”œâ”€â”€ report-viewer.tsx
    â”œâ”€â”€ ClientWrapper.tsx
    â”œâ”€â”€ file-process.client.tsx
    â”œâ”€â”€ note.text
    â””â”€â”€ page.tsx
```

out of these we just creted these files

page.tsx
file-process.client.tsx
ClientWrapper.tsx
fileHandlers.ts
extractData.ts   : dummy records
detectHeaderRows.ts
detectFileType.ts
types.ts



â”œâ”€â”€ ğŸ“components
â”‚   â”œâ”€â”€ ğŸ“utils
â”‚   â”‚   â”œâ”€â”€ fileHandlers.ts            â† Only high-level coordination logic
â”‚   â”‚   â”œâ”€â”€ detectFileType.ts          â† Determines type: csv, xlsx, txt
â”‚   â”‚   â”œâ”€â”€ parseFile.ts               â† Contains parsing logic for different types
â”‚   â”‚   â”œâ”€â”€ detectHeaderRows.ts        â† Logic to detect how many header rows
â”‚   â”‚   â”œâ”€â”€ extractData.ts             â† Extracts final data array
â”‚   â”‚   â””â”€â”€ types.ts                   â† Shared types/interfaces
â”‚   â”œâ”€â”€ ğŸ“„file-selector.tsx            â† Handles file selection UI
â”‚   â””â”€â”€ ğŸ“„file-preview.tsx             â† Optional: to show file summary or preview
â”œâ”€â”€ ğŸ“„file-process.client.tsx          â† Calls `handleFile`, shows output
â””â”€â”€ ğŸ“„page.tsx


utr3/
â”œâ”€â”€ ğŸ“components/
â”‚   â”œâ”€â”€ ğŸ“„file-selector.tsx             â† Upload UI
â”‚   â”œâ”€â”€ ğŸ“„report-viewer.tsx             â† Shows generated report
â”‚   â”œâ”€â”€ ğŸ“„export-buttons.tsx            â† For exporting report (CSV, Excel, etc.)
â”‚   â””â”€â”€ ğŸ“utils/
â”‚       â”œâ”€â”€ fileHandlers.ts             â† handleFile(file): Parses and extracts
â”‚       â”œâ”€â”€ detectFileType.ts
â”‚       â”œâ”€â”€ parseCsv.ts / parseXlsx.ts  â† per file type
â”‚       â”œâ”€â”€ detectHeaders.ts
â”‚       â”œâ”€â”€ types.ts                    â† Shared types
â”œâ”€â”€ ğŸ“„file-process.client.tsx           â† Stores 2 parsed files + report state
â””â”€â”€ ğŸ“„page.tsx                           â† Renders <FileUploadFlow />


âœ… Component Flow

Hereâ€™s the component tree:
<page.tsx>
  â””â”€â”€ <FileUploadFlow />     // file-process.client.tsx
       â”œâ”€â”€ <FileSelector />  // 2x for two files
       â”œâ”€â”€ <ReportViewer />
       â””â”€â”€ <ExportButtons />


****************
âœ… Key Concepts for You
1. Global or Local State (client-side)

You need to store:

Parsed file 1 (letâ€™s call it dataA)

Parsed file 2 (dataB)

Generated reportData

Use useState or a global store like Zustand.


const [dataA, setDataA] = useState<ParsedFileData | null>(null);
const [dataB, setDataB] = useState<ParsedFileData | null>(null);
const [report, setReport] = useState<ReportData | null>(null);


***************

2. handleFile should RETURN data

Because you're storing the parsed file in local state (not just logging), your function should return the parsed object:


export const handleFile = async (file: File): Promise<ParsedFileData | null> => {
  if (!file) return null;

  const fileType = detectFileType(file.name);
  const content = await parseFile(file, fileType);
  const headers = detectHeaders(content);
  const data = extractData(content, headers);

  return {
    fileName: file.name,
    headers,
    data,
    type: fileType
  };
};



src/app/(dashboard)/school/[tenantName]/(features)/utr3/
â”œâ”€â”€ page.tsx
â”œâ”€â”€ file-process.client.tsx         â† Main logic component
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ file-selector.tsx           â† File upload input
â”‚   â”œâ”€â”€ report-viewer.tsx           â† Shows generated report
â”‚   â”œâ”€â”€ export-buttons.tsx          â† Export buttons placeholder
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ fileHandlers.ts         â† Parses file
â”‚       â”œâ”€â”€ detectFileType.ts       â† Returns 'csv', 'xlsx', etc.
â”‚       â”œâ”€â”€ types.ts                â† Shared types
